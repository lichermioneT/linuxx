缓冲区

文件系统

文件描述符分配规则
  从小到大，没有被使用的

文件操作 = 进程 + 打开的文件
文件描述符，数组下标

stdin
stdout
stderr

本来输入stdout---->file.txt文件里面去了。
dup2(fd,1),输出重定向


pcb拷贝
files_struct拷贝

如何理解一切皆文件。
函数指针指向不同的文件。



理解缓冲区域
  本质及时一段内存。谁申请的？属于谁的？为什么要申请？
    
    缓冲区的意义？节省进程进行数据IO的时间！！ 
    我们没有进行拷贝啊？ fwrite---->其实是一个拷贝函数，将数据从进程拷贝到缓冲区或者外设中！！
    
缓冲区刷新策略的问题。
  如果有一块数据，一次写入到外设。效率高
  如果有一块数据，多次写入到外设。效率低，多次IO访问。

缓冲区一定会结合具体设计，定制刷新自己的策略。
1.立即刷新--无缓冲
2.行刷新----行缓存---显示器----->给人看的
3.缓冲区----全缓冲---磁盘文件。
特例
1.用户强制刷新
2.进程退出，一般都要进行缓冲区刷新。

你所谓的缓冲区在哪里？指的是什么缓冲区？
 缓冲区域不在内核中！ 
 所有的缓冲区都指的是，用户级语言层面给我们提供的缓冲区。
 这个缓冲区在，stdout stdin stderr --> FILE* --> FILE 结构体 --> fd && 缓冲区！！！！！！！！！！！。
              我们在强制刷新，fflush(文件指针)， fclose(文件指针)。


如何解释刚刚fork()的问题呢？
 所缓冲区改如何理解呢？
  



 和OS有什么关系？



































































































