进程的当前路径
文件描述符是从 stdin stdout stderr file1 file2 ...

struct file：文件的大部分属性
struct file* array[] 文件描述符表
struct files_struct 
struct files_struct* files  pcb的属性

文件描述符表

文件fd的分配规则


task_struct
{

}

文件描述表
  从小到大，按照顺序寻找最小且没有被占用的fd，fd的分配规则。


stdout显示器 --- stdout --- fd --> 1
显示器也是一个文件

输出重定向

关了(close(1))
 本来是显示器，现在输出到了文件里面。

输出重定向
>   覆盖
>>  追加

输出重定向
<   覆盖
<<  追加

重定向的本质是什么？
  上层用的fd不变，在内核中更改了fd对应的的struct file*的地址


dup2本质就是 0 1 2 3 4 .... 相互拷贝的

0
1
2
fd


fd拷贝给1

追加重定向


输出重定向


理解
>
>>


file_struct 需要给子进程拷贝一份，文件不需要给子进程拷贝一份的

linux一切皆文件
如何理解呢？
如何证明呢？看到。



vfs
unix c linux c++
多态？？？？？？？？？？？？？？？？？？？？？？？？？？
站在struct files上层看来， 所有的设备和文件，统一都是struct file--> linux一切皆文件。

struct file
{
  int type;
  int status;
  int (*readp)();
  int (*writep)();
}
驱动 struct ...{}
键盘 显示器 磁盘 网卡   硬件

文件引用计数---防止子进程操作(父进程删除文件)
文件权限 -----
文件的操作位置----写
文件的操作方法
内存页 

file---》方法指针，会初始化。
file---》找到内存的缓冲区

存储
计算
业务

谦虚
谦虚
一直学习
一直总结
基础
基础


缓冲区






































































































