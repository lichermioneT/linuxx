# SHELL

下面给你一份**从入门到精通的 Shell 编程系统学习计划**。该计划以 **Linux / Bash** 为主线，强调**工程实践 + 底层理解 + 可迁移能力**，适合你目前已经具备 **Linux 基础与 C/C++ 编程经验** 的背景。

------

## 总体目标

- 能**熟练阅读和编写**中大型 Shell 脚本
- 能用 Shell **自动化运维、构建、测试、部署**
- 理解 Shell **执行模型、进程/管道/重定向本质**
- 具备 **Debug、性能优化、安全加固** 能力
- 达到 **“不只是会写，而是写得规范、可维护”** 的水平

------

# 阶段一：Shell 基础入门（0 → 1）

> 目标：**会写、能跑、不害怕**

### 1️⃣ Shell 基本认知（1–2 天）

- Shell 是什么（解释器 vs 程序）
- 常见 Shell
  - `sh / bash / dash / zsh`
- 登录 Shell / 非登录 Shell
- 脚本第一行

```sh
#!/bin/bash
```

📌 实践：

```sh
echo "Hello Shell"
```

------

### 2️⃣ 变量与参数（2–3 天）

- 变量定义与使用

```sh
name=lic
echo "$name"
```

- 环境变量 vs 局部变量

```sh
export PATH=...
```

- 特殊变量（**重点**）

```sh
$0 $1 $2
$#
$*
$@
$?
$$
```

📌 实践：

- 写一个脚本，打印命令行参数信息

------

### 3️⃣ 输入输出与转义（1–2 天）

- `echo / printf`
- 引号区别（**非常重要**）
  - `' '`
  - `" "`
  - \```
- 转义字符

📌 练习：

```sh
echo '$PATH'
echo "$PATH"
```

------

# 阶段二：流程控制与逻辑能力（1 → 2）

> 目标：**写“像程序一样”的 Shell**

------

### 4️⃣ 条件判断（3–4 天）

- `test` / `[ ]` / `[[ ]]`
- 文件测试

```sh
-f -d -r -w -x
```

- 字符串判断
- 数值判断

📌 示例：

```sh
if [ -f a.txt ]; then
  echo "exist"
fi
```

------

### 5️⃣ 流程控制（3–4 天）

- `if / elif / else`
- `case`
- `for`
- `while`
- `until`
- `break / continue`

📌 实践：

- 批量重命名文件
- 统计目录下文件数量

------

### 6️⃣ 函数与作用域（2–3 天）

- 函数定义
- 参数传递
- 返回值（`$?`）
- `local` 关键字

📌 实践：

- 抽象一个“日志打印函数”

------

# 阶段三：文本处理与管道（Shell 核心能力）

> 目标：**90% Shell 场景的杀手锏**

------

### 7️⃣ 重定向与管道（2–3 天）

- 重定向

```sh
> >> < 2> &>
```

- 管道

```sh
ps aux | grep root | awk '{print $2}'
```

- here-doc

------

### 8️⃣ 三剑客（重点、重点、重点）（7–10 天）

#### 🔪 grep

- 正则基础
- `-E -i -v -n`

#### 🔪 sed

- 替换
- 行删除
- 正则

#### 🔪 awk（Shell 的“半个编程语言”）

- 字段 `$1 $2`
- 内置变量 `NR NF`
- 条件与动作

📌 综合实战：

- 解析日志
- 统计 IP 访问次数
- 生成报表

------

# 阶段四：进程、信号与系统级理解（进阶）

> 目标：**写“懂系统”的 Shell**

------

### 9️⃣ 进程管理（3–4 天）

- 前台 / 后台
- `&`
- `jobs / fg / bg`
- `wait`
- `nohup`

------

### 🔟 信号与 trap（2–3 天）

- 常见信号

```sh
SIGINT SIGTERM SIGKILL
```

- `trap`

📌 实践：

- 写一个可优雅退出的脚本

------

### 1️⃣1️⃣ 子 Shell 与执行模型（2–3 天）

- `()` vs `{ }`
- 子进程变量继承
- `source`

------

# 阶段五：工程化 Shell（高手分水岭）

> 目标：**可维护、可部署、可扩展**

------

### 1️⃣2️⃣ 脚本规范（2–3 天）

- `set -e`
- `set -u`
- `set -o pipefail`
- 错误处理
- 日志系统

------

### 1️⃣3️⃣ 参数解析（2–3 天）

- `$@`
- `getopts`
- 帮助信息

📌 实践：

- 写一个带 `-h -v -f` 参数的工具脚本

------

### 1️⃣4️⃣ 调试与性能（2–3 天）

- `bash -x`
- `set -x`
- `time`
- 避免 UUOC

------

# 阶段六：高级主题（精通）

> 目标：**你已经是“会教别人”的水平**

------

### 1️⃣5️⃣ 正则表达式进阶（4–5 天）

- 贪婪/非贪婪
- 分组
- 回溯

------

### 1️⃣6️⃣ Shell 与 C / Python 协作（2–3 天）

- Shell 调用 C 程序
- Shell 调 Python
- 什么时候 **不该用 Shell**

------

### 1️⃣7️⃣ 实战项目（至少 2–3 个）

#### 项目建议

- 日志分析系统
- 自动化部署脚本
- 服务守护与监控脚本
- 编译 + 测试流水线

------

# 学习节奏建议（结合你背景）

| 阶段   | 时间   |
| ------ | ------ |
| 入门   | 1 周   |
| 核心   | 2–3 周 |
| 进阶   | 2 周   |
| 工程化 | 1–2 周 |
| 精通   | 持续   |

------

## 推荐资料

- 《Linux Shell 脚本攻略》
- 《Advanced Bash-Scripting Guide》（必看）
- `man bash`
- 多读 `/usr/bin` 下脚本

------

## 下一步建议

如果你愿意，我可以：

1. **按“每天任务”给你拆成 30 天学习表**
2. **结合你做过的网络编程 / ROS / C++ 项目，设计 Shell 实战**
3. **给你一套“面试级 Shell 常考题 + 标准答案”**

你更想先从哪一个开始？
