自旋锁
  1将自己挂起等待
  2自旋(轮询)
  是什么决定了最终的等待方式？我们要等待的时长问题！！
已经被申请的临界资源，决定了其它线程的等待。
一个成功申请临界资源的线程，在临界区要待多长时间。

时间长短该如何定义？都有，分别测试效果。

自旋转锁
  pthread_spin_lock()

读写锁
读者写着问题
写者：互斥关系
读写：互斥同步
读读：没有关系,

读者写者模型和生产者模型 本质区别是：消费者会拿走数据，读者不会拿走数据的。
场景：一次发布很长时间不去修改，大部分时间是被读取的。
在任何时刻，一个人写入，但是可能多个读者读去。

pthread_mutex_t rdlock;
int reader_count = 0;

lock(&rdlock);
reader_count++;
if(reader_count++ == 1)
{
  lock(wrlock);
}
unlock(&rdlock)
//读数据

lock(&rdlock)
reader_count--
if(reader_count == 0)unlock(&wrlock)
unlock(&rdlock)


pthread_mutex_t wrlock

lock(&wrlock)
//写
unlock(&wrlock)

基本上都是读者优先


linux的网络
Linux的基础
书籍推荐：
OS原理：《操作系统精髓与设计原理》 《现代操作系统》
Linux内核：《Linux内核设计与实现》陈莉君 《深入理解Linux内核》(选读)
linux编程方：《linux高性能服务器编程》 《Unix环境高级编程》
体系结构：深入理解计算机系统。
先编程再原理。

计算机给人计算的。
人需要相互协作的。

运营商

协议是一种约定。
所以，一台计算机内部本质也是一个小型网络结构。
计算机体系结构中有网络
网络中有体系结构

近距离通信，障碍比较少，不容易出错。
距离边长，可能会引入新的通信问题。尽可能减少通信成本，定制协议。
为什么会存在协议？

所有的网络问题：本质都是传输距离变长了。

什么是协议问题？
电话响一声，两声，三声，都代表不同的含义，不用过多的解释，双方早已经有共识了。
协议就是约定。

如果用计算机语言来表达,计算机协议。

